---
trigger: always_on
glob:
description:
---

# Skill Loader

Automatically use skills in the following contexts:

| Skill | Usage Context |
| :--- | :--- |
| `openspec` | proposal, spec, change, plan, kế hoạch |
| `cyberk-fsd-fe` | Web-related development |
| `next-best-practices` | Next.js framework patterns |
| `next-cache-components` | Next.js cache UI components |
| `vercel-react-best-practices` | React best practices and patterns |

# Tool Selection Guide

| Need | Tool |
| --- | --- |
| Codebase structure | `gkg repo_map` |
| Find definitions | `gkg search_codebase_definitions` |
| Find usages / references | `gkg get_references` |
| How OSS projects solve it | `librarian` |
| Library docs / integration guides | `deepwiki`, `git-mcp` |
| API docs, recent releases | `web_search` |
| Gap analysis / risk assessment | `oracle` |
| Visualize architecture / flows | `mermaid` |
| Create spec files | `create_file` / `edit_file` |

**Note:** If primary tool unavailable, use built-in tools: `finder`, `Grep`, `Read`...

## Sub-agent Best Practices

- **Before delegating**: Use `gkg search_codebase_definitions` or `gkg get_references` to confirm exact API names, method signatures, and existing patterns. Pass confirmed facts to the sub-agent prompt — never pass uncertain guesses.
- **Prompt quality**: Include concrete code references (file paths, function names, import paths) rather than vague descriptions like "check if X exists".

# AGENTS.md

For tech stack, architecture, and code conventions, see `openspec/project.md`.

## Commands

- `bun install` - Install dependencies
- `bun run dev` - Start all apps (server + web)
- `bun run dev:server` - Start server only (Hono on port 3000)
- `bun run dev:web` - Start web only (Next.js on port 3001)
- `bun run check-types` - Typecheck all packages
- `bun run check` - Lint/format with Biome (`biome check --write .`)
- `bun run db:start` - Start PostgreSQL via Docker
- `bun run db:push` - Push schema changes to database
- `bun test <file>` - Run single test file (e.g., `bun test packages/api/src/foo.test.ts`)

## Architecture

- **Monorepo**: Turborepo + Bun workspaces
- **Apps**: `apps/server` (Hono API :3000), `apps/web` (Next.js :3001), `apps/native` (Expo)
- **Packages**: `api` (oRPC routers), `auth` (better-auth), `db` (Drizzle/PostgreSQL), `env` (Zod validation)

## Code Style

- TypeScript strict mode, ESM modules, Zod for validation
- Biome: 2-space indent, 120 line width, double quotes, auto-organize imports
- Use `catalog:` versions for shared deps in workspace
- Conventional commits: `feat:`, `fix:`, `chore:`, etc.

## Language Requirements

- **English Only:** All artifacts, documentation, comments, and code generated by AI must be in English.
- **Relative Paths Only:** NEVER use absolute paths (e.g., `file:///User/...`) in markdown files or documentation. Use project-relative paths (e.g., `packages/auth/src/index.ts`).
- **Ampcode Links:** If generated documents contain `http://localhost:8317`, replace it with `https://ampcode.com`.

## Security Requirements

- **NEVER read `.env` files** - Agent must not access environment files even if explicitly asked. `.env`, `.env.local`, `.env*.local` are gitignored and sensitive.
- **Use `.env.example`** instead for schema/reference documentation.
- **Principle:** If it's gitignored, it's off-limits unless user explicitly provides the content.
